(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f2fb"],{d96f:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return e.want_login?o("b-modal",{attrs:{id:"login_modal",okTitle:"Accedi","ok-only":""},on:{ok:function(t){return t.preventDefault(),e.attempt_login(t)},hide:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"modal-header",fn:function(){return[o("h5",{staticClass:"modal-title"},[e._v("Accedi all'applicazione")])]},proxy:!0}],null,!1,1072959632),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},[o("p",[e._v("Per usare questa applicazione è necessario avere un "),o("b",[e._v("profilo")]),e._v(". È possibile aggiungere l'applicazione alla propria schermata del cellulare per rendere l'accesso più comodo.")]),o("p",[e._v(" Per favore, inserisci i tuoi dati. Se non hai un profilo, vai alla pagina di "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("registrazione")]),e._v(". ")]),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("b-icon-envelope")],1),o("b-form-input",{attrs:{placeholder:"Email address",autofocus:""},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"insert",void 0,t.key,void 0)?null:t.ctrlKey?function(){e.email="user@example.com",e.password="pass",e.attempt_login()}():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"insert",void 0,t.key,void 0)?null:t.ctrlKey&&t.altKey?function(){e.email="admin@example.com",e.password="pass",e.attempt_login()}():null}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("b-icon-lock")],1),o("b-form-input",{attrs:{placeholder:"Password",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1)],1):o("b-modal",{attrs:{id:"signup_modal",okTitle:"Registrami",cancelTitle:"Annulla"},on:{ok:function(t){return t.preventDefault(),e.attempt_signup(t)},cancel:function(t){return t.preventDefault(),e.toggleForm(t)},hide:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"modal-header",fn:function(){return[o("h5",{staticClass:"modal-title"},[e._v("Crea un profilo")])]},proxy:!0}]),model:{value:e.modalShow,callback:function(t){e.modalShow=t},expression:"modalShow"}},[e.alert_message?o("b-alert",{attrs:{show:"",dismissible:"",variant:"warning"},on:{dismissed:e.dismiss_alert_message}},[e._v(e._s(e.alert_message))]):e._e(),o("p",[e._v(" Se non hai ancora un profilo, inserisci qui i tuoi dati e potrai accedere. Se hai già un profilo, torna alla pagina di "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),e.toggleForm(t)}}},[e._v("accesso")]),e._v(". ")]),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("b-icon-envelope")],1),o("b-form-input",{attrs:{placeholder:"Email address",autofocus:""},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("b-icon-lock")],1),o("b-form-input",{attrs:{placeholder:"Password",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_signup(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("b-icon-shield-lock")],1),o("b-form-input",{attrs:{placeholder:"Conferma password",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_signup(t)}},model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}})],1)],1)},n=[],i={props:{},data:function(){return{visible:!0,want_login:!0,email:null,password:null,password_confirmation:null}},computed:{},methods:{toggleForm:function(){this.want_login=!this.want_login},attempt_login:function(){var e=this;this.axios.post("/users/login",{email:this.$data.email,password:this.$data.password}).then((function(t){console.log("Backend >> ",t.data),e.$session.set("authtoken",t.data.access_token),e.$store.dispatch("auth_refresh"),e.$store.commit("page","main")})).catch((function(t){console.log("Error >> ",t),e.$store.commit("warning_alert","Qualcosa è andato storto. Riprova ad accedere.")}))},attempt_signup:function(){var e=this;this.axios.post("/users/signup",{email:this.$data.email,password:this.$data.password,password_confirmation:this.$data.password_confirmation}).then((function(t){console.log("Backend >> ",t.data),e.$store.commit("success_alert","Utente creato con successo."),e.$session.set("authtoken",t.data.access_token),e.$store.dispatch("auth_refresh"),e.$store.commit("page","main")})).catch((function(t){console.log("Error >> ",t),e.$store.commit("warning_alert","Qualcosa è andato storto. Potrebbe essere che la mail è già in uso.")}))}}},s=i,r=o("2877"),l=Object(r["a"])(s,a,n,!1,null,"37bd590a",null);t["default"]=l.exports}}]);