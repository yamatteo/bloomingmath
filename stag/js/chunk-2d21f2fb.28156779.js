(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d21f2fb"],{d96f:function(e,t,o){"use strict";o.r(t);var a=function(){var e=this,t=e.$createElement,o=e._self._c||t;return o("b-modal",{attrs:{"ok-only":e.okOnly,okTitle:e.okTitle,cancelTitle:"Annulla"},on:{ok:function(t){return t.preventDefault(),e.eventOk(t)},cancel:function(t){return t.preventDefault(),function(){return e.wear("login")}()},hide:function(e){e.preventDefault()}},scopedSlots:e._u([{key:"modal-header",fn:function(){return[o("h5",{staticClass:"modal-title"},[e._v(e._s(e.modalTitle))])]},proxy:!0}]),model:{value:e.visible,callback:function(t){e.visible=t},expression:"visible"}},["login"==e.mask?o("div",[o("p",[e._v(" Per usare questa applicazione è necessario avere un "),o("b",[e._v("profilo")]),e._v(". È possibile aggiungere l'applicazione alla propria schermata del cellulare per rendere l'accesso più comodo. ")]),o("p",[e._v(" Per favore, inserisci i tuoi dati. Se non hai un profilo, vai alla pagina di "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.wear("signup")}()}}},[e._v("registrazione")]),e._v(". ")])]):"signup"==e.mask?o("div",[o("p",[e._v(" Se non hai ancora un profilo, inserisci qui i tuoi dati e potrai accedere. Se hai già un profilo, torna alla pagina di "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.wear("login")}()}}},[e._v("accesso")]),e._v(". ")])]):"reset"==e.mask?o("div",[o("p",[e._v(" Se vuoi reimpostare la password devi inserire anche il codice che di verrà inviato per mail. Questo codice serve ad essere sicuri che è proprio il proprietario della mail a richiedere la nuova password. Se non vuoi cambiare password, torna alla pagina di "),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.wear("login")}()}}},[e._v("accesso")]),e._v(". ")]),o("p",[e._v(' Per cambiare password, inserisci la tua mail e poi premi su "Invia codice". Dopo qualche minuto arriverà una mail al tuo indirizzo. Copia il codice e inseriscilo qui sotto assieme alla nuova password. ')])]):e._e(),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("font-awesome-icon",{attrs:{icon:"envelope"}})],1),o("b-form-input",{attrs:{placeholder:"Email address",autofocus:""},on:{keyup:[function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"insert",void 0,t.key,void 0)?null:t.ctrlKey?function(){e.email="user@example.com",e.password="pass",e.attempt_login()}():null},function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"insert",void 0,t.key,void 0)?null:t.ctrlKey&&t.altKey?function(){e.email="admin@example.com",e.password="pass",e.attempt_login()}():null}]},model:{value:e.email,callback:function(t){e.email=t},expression:"email"}})],1),"reset"==e.mask?o("b-button",{staticClass:"my-2",attrs:{block:"",disabled:e.code_sent},on:{click:e.send_code}},[e._v(e._s(e.code_sent?"Codice inviato (controlla la posta)":"Invia il codice"))]):e._e(),"reset"==e.mask?o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("font-awesome-icon",{attrs:{icon:"key"}})],1),o("b-form-input",{attrs:{placeholder:"Codice reimpostazione",type:"text"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_reset(t)}},model:{value:e.reset_code,callback:function(t){e.reset_code=t},expression:"reset_code"}})],1):e._e(),o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("font-awesome-icon",{attrs:{icon:"lock"}})],1),o("b-form-input",{attrs:{placeholder:"Password",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_login(t)}},model:{value:e.password,callback:function(t){e.password=t},expression:"password"}})],1),"signup"==e.mask||"reset"==e.mask?o("b-input-group",{attrs:{size:"lg"}},[o("b-input-group-prepend",{attrs:{"is-text":""}},[o("font-awesome-icon",{attrs:{icon:"check"}})],1),o("b-form-input",{attrs:{placeholder:"Conferma password",type:"password"},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.attempt_signup(t)}},model:{value:e.password_confirmation,callback:function(t){e.password_confirmation=t},expression:"password_confirmation"}})],1):e._e(),e.wrong_credentials?o("b-alert",{staticClass:"mt-2",attrs:{variant:"warning",show:"",dismissible:""}},[o("b",[e._v("Le credenziali inserite non sono riconosciute.")]),o("br"),e._v("Hai scritto bene l'indirizzo mail? "),o("br"),o("a",{attrs:{href:"#"},on:{click:function(t){return t.preventDefault(),function(){return e.wear("reset")}()}}},[e._v("Hai dimenticato la password?")])]):e._e()],1)},s=[],i={props:{},data:function(){return{visible:!0,mask:"login",email:null,password:null,password_confirmation:null,reset_code:null,wrong_credentials:!1,code_sent:!1}},computed:{eventOk:function(){return"login"==this.mask?this.attempt_login:"signup"==this.mask?this.attempt_signup:"reset"==this.mask?this.attempt_reset:null},modalTitle:function(){return"login"==this.mask?"Accedi all'applicazione":"signup"==this.mask?"Crea un profilo":"reset"==this.mask?"Richiedi nuova password":null},okOnly:function(){return"login"==this.mask},okTitle:function(){return"login"==this.mask?"Accedi":"signup"==this.mask?"Registrami":"reset"==this.mask?"Reset password":null}},methods:{wear:function(e){this.mask=e,this.password=null,this.password_confirmation=null,this.reset_code=null,this.wrong_credentials=null},attempt_login:function(){var e=this;this.axios.post("/users/login",{email:this.$data.email,password:this.$data.password}).then((function(t){console.log("Backend >> ",t.data),e.$session.set("authtoken",t.data.access_token),e.$store.dispatch("auth_refresh"),e.$store.commit("page","main")})).catch((function(t){console.log("Error >> ",t),e.wrong_credentials=!0}))},attempt_signup:function(){var e=this;this.axios.post("/users/signup",{email:this.$data.email,password:this.$data.password,password_confirmation:this.$data.password_confirmation}).then((function(t){console.log("Backend >> ",t.data),e.$store.commit("success_alert","Utente creato con successo."),e.$session.set("authtoken",t.data.access_token),e.$store.dispatch("auth_refresh"),e.$store.commit("page","main")})).catch((function(t){console.log("Error >> ",t),e.$store.commit("warning_alert","Qualcosa è andato storto. Potrebbe essere che la mail è già in uso.")}))},send_code:function(){this.code_sent=!0,this.axios.post("/users/password_reset_request",{email:this.$data.email}).then((function(e){console.log("Backend (code request) >>",e.data)})).catch((function(e){console.log("Error (code request)",e)}))},attempt_reset:function(){var e=this;this.axios.post("/users/password_reset",{email:this.$data.email,token:this.$data.reset_code,password:this.$data.password,password_confirmation:this.$data.password_confirmation}).then((function(t){console.log("Backend (reset request) >>",t.data),e.$store.commit("success_alert","La password è stata reimpostata.")})).catch((function(t){console.log("Error (reset request)",t),e.$store.commit("warning_alert","Qualcosa è andato storto.")}))}}},n=i,r=o("2877"),l=Object(r["a"])(n,a,s,!1,null,"7967a4eb",null);t["default"]=l.exports}}]);